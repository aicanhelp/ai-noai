### 程序设计性能与高速缓存  

1、设计原则  
- （1）独立访问的对象或域应该被补充调整使得他们能在不同的缓存块上结束使用。 （也就是补足缓存行，两个变量在同一缓存行上，同时访问时处理器硬件层面会自动加锁）  
- （2）将只读数据与那些频繁修改的数据相分离。例如，考虑一个链表，其结构是固定不变的，但元素的值频繁变化。为了确保修改不会减慢对链表的遍历，应该补充调整值域以使得每个值战幕一个缓存块。（原理同（1））  
- 在允许的情形下，将一个对象分解成一些本地线程片段。例如，用于统计的计数器可以分解成一个计数器组成的数组，每个线程一个，每个都位于不同的缓存块中，当一个共享的计数器导致无效的流量时，分解的计数器则允许每个线程更新自己的副本而不会引起相关流量。
- 如果一个锁来保护频繁修改的数据，那么要尽量将锁和数据保存在不同的缓存块，这样，正在尝试或得锁的线程不会干扰锁的持有者对数据的访问。
- 如果一个锁保护不常争用的数据，那么要尽量将锁和数据保护存在同一个混存块中，这样，获取锁的同时也会将一部分数据装入缓存块中。
- 